---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
  lang?: string;
}

const { title, description = "Aperto - An accessible Bible translation", lang = "en" } = Astro.props;
const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith('/') ? rawBase : rawBase + '/';
---

<!DOCTYPE html>
<html lang={lang}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href={`${base}favicon.svg`} />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" rel="stylesheet" />
    <title>{title} | Aperto</title>
  </head>
  <body class="min-h-screen" style="background-color: #FFFBF5;">
    <header class="px-4 md:px-16 lg:px-24 py-4 md:py-8" style="border-bottom: 1px solid #F5E6DC;">
      <nav class="max-w-6xl mx-auto flex justify-between items-center">
        <a href={base} class="logo text-xl md:text-2xl" style="color: #2C2C2C;">
          aperto
        </a>

        <!-- Desktop Navigation -->
        <div class="hidden md:flex gap-6 items-center">
          <a href={`${base}about`} class="transition-colors hover:opacity-70" style="color: #9A8F85;">About</a>
          <a href={`${base}process`} class="transition-colors hover:opacity-70" style="color: #9A8F85;">Our Process</a>
          <div class="flex gap-1 text-sm">
            <a href={`${base}en/luke/1`} class="px-2 py-1 rounded transition-all hover:bg-gray-100" style="border: 1px solid #F5E6DC; color: #2C2C2C;">EN</a>
            <a href={`${base}de/luke/1`} class="px-2 py-1 rounded transition-all hover:bg-gray-100" style="border: 1px solid #F5E6DC; color: #2C2C2C;">DE</a>
            <a href={`${base}fr/luke/1`} class="px-2 py-1 rounded transition-all hover:bg-gray-100" style="border: 1px solid #F5E6DC; color: #2C2C2C;">FR</a>
            <a href={`${base}pl/luke/1`} class="px-2 py-1 rounded transition-all hover:bg-gray-100" style="border: 1px solid #F5E6DC; color: #2C2C2C;">PL</a>
            <a href={`${base}tr/luke/1`} class="px-2 py-1 rounded transition-all hover:bg-gray-100" style="border: 1px solid #F5E6DC; color: #2C2C2C;">TR</a>
          </div>
        </div>

        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg hover:bg-gray-100" aria-label="Open menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </nav>

      <!-- Mobile Menu Overlay -->
      <div id="mobile-menu" class="fixed inset-0 z-50 hidden" style="background-color: rgba(0,0,0,0.5);">
        <div class="absolute right-0 top-0 h-full w-72 p-6" style="background-color: #FFFBF5;">
          <div class="flex justify-between items-center mb-8">
            <span class="text-xl font-medium">Menu</span>
            <button id="mobile-menu-close" class="p-2 rounded-lg hover:bg-gray-100" aria-label="Close menu">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>

          <div class="space-y-6">
            <div class="space-y-4">
              <a href={base} class="block text-lg" style="color: #2C2C2C;">Home</a>
              <a href={`${base}about`} class="block text-lg" style="color: #2C2C2C;">About</a>
              <a href={`${base}process`} class="block text-lg" style="color: #2C2C2C;">Our Process</a>
            </div>

            <div class="pt-4" style="border-top: 1px solid #F5E6DC;">
              <p class="text-sm mb-3" style="color: #9A8F85;">Read Luke 1</p>
              <div class="grid grid-cols-2 gap-2">
                <a href={`${base}en/luke/1`} class="px-4 py-3 rounded-lg text-center transition-all" style="background-color: #F5E6DC; color: #2C2C2C;">
                  <span class="block font-medium">English</span>
                </a>
                <a href={`${base}de/luke/1`} class="px-4 py-3 rounded-lg text-center transition-all" style="background-color: #F5E6DC; color: #2C2C2C;">
                  <span class="block font-medium">Deutsch</span>
                </a>
                <a href={`${base}fr/luke/1`} class="px-4 py-3 rounded-lg text-center transition-all" style="background-color: #F5E6DC; color: #2C2C2C;">
                  <span class="block font-medium">Français</span>
                </a>
                <a href={`${base}pl/luke/1`} class="px-4 py-3 rounded-lg text-center transition-all" style="background-color: #F5E6DC; color: #2C2C2C;">
                  <span class="block font-medium">Polski</span>
                </a>
                <a href={`${base}tr/luke/1`} class="px-4 py-3 rounded-lg text-center transition-all col-span-2" style="background-color: #F5E6DC; color: #2C2C2C;">
                  <span class="block font-medium">Türkçe</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <script is:inline>
      document.getElementById('mobile-menu-btn').addEventListener('click', function() {
        document.getElementById('mobile-menu').classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      });
      document.getElementById('mobile-menu-close').addEventListener('click', function() {
        document.getElementById('mobile-menu').classList.add('hidden');
        document.body.style.overflow = '';
      });
      document.getElementById('mobile-menu').addEventListener('click', function(e) {
        if (e.target === this) {
          this.classList.add('hidden');
          document.body.style.overflow = '';
        }
      });
    </script>

    <main>
      <slot />
    </main>

    <footer class="px-8 md:px-16 lg:px-24 py-16 mt-24" style="border-top: 1px solid #F5E6DC; background-color: rgba(245, 230, 220, 0.3);">
      <div class="max-w-6xl mx-auto">
        <div class="grid md:grid-cols-3 gap-12">
          <div>
            <h4 class="text-xl mb-4">Aperto</h4>
            <p class="text-sm leading-relaxed" style="color: #9A8F85;">
              A fresh translation that welcomes everyone to the conversation.
            </p>
          </div>
          <div>
            <h4 class="text-xl mb-4">Navigate</h4>
            <ul class="space-y-2 text-sm">
              <li><a href={base} style="color: #9A8F85;">Home</a></li>
              <li><a href={`${base}about`} style="color: #9A8F85;">About</a></li>
              <li><a href={`${base}process`} style="color: #9A8F85;">Our Process</a></li>
            </ul>
            <h4 class="text-lg mt-6 mb-3">Luke 1</h4>
            <ul class="space-y-2 text-sm">
              <li><a href={`${base}en/luke/1`} style="color: #9A8F85;">English</a></li>
              <li><a href={`${base}de/luke/1`} style="color: #9A8F85;">Deutsch</a></li>
              <li><a href={`${base}fr/luke/1`} style="color: #9A8F85;">Français</a></li>
              <li><a href={`${base}pl/luke/1`} style="color: #9A8F85;">Polski</a></li>
              <li><a href={`${base}tr/luke/1`} style="color: #9A8F85;">Türkçe</a></li>
            </ul>
          </div>
          <div>
            <h4 class="text-xl mb-4">License</h4>
            <p class="text-sm leading-relaxed" style="color: #9A8F85;">
              CC BY-SA 4.0<br>
              Free to share and adapt with attribution.
            </p>
          </div>
        </div>
        <div class="mt-12 pt-8 text-center text-sm" style="border-top: 1px solid #F5E6DC; color: #9A8F85;">
          2025 Aperto Bible Project
        </div>
      </div>
    </footer>
  </body>
</html>
