---
interface Props {
  currentLang: string;
  basePath: string; // e.g., "about" or "process"
}

const { currentLang, basePath } = Astro.props;

const rawBase = import.meta.env.BASE_URL;
const base = rawBase.endsWith('/') ? rawBase.slice(0, -1) : rawBase;

const languages = [
  { code: 'en', label: 'EN', name: 'English' },
  { code: 'de', label: 'DE', name: 'Deutsch' },
  { code: 'fr', label: 'FR', name: 'Français' },
  { code: 'pl', label: 'PL', name: 'Polski' },
  { code: 'tr', label: 'TR', name: 'Türkçe' },
];

function getPath(langCode: string): string {
  if (langCode === 'en') {
    return `${base}/${basePath}`;
  }
  return `${base}/${langCode}/${basePath}`;
}
---

<div class="language-switcher flex items-center gap-2 flex-wrap justify-center">
  <span class="text-xs opacity-60 mr-1" style="color: #8B7355;">Language:</span>
  {languages.map((lang) => (
    <a
      href={getPath(lang.code)}
      class:list={[
        "px-3 py-1.5 rounded-full text-xs font-medium transition-all",
        currentLang === lang.code
          ? "active"
          : "inactive hover:opacity-80"
      ]}
      title={lang.name}
    >
      {lang.label}
    </a>
  ))}
</div>

<style>
  .language-switcher .active {
    background: #8B7355;
    color: #FFFBF5;
  }

  .language-switcher .inactive {
    background: rgba(139, 115, 85, 0.1);
    color: #8B7355;
  }
</style>
